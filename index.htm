<!--
  _____   __   ____  _        ___      __    __   ___   ____   __  _  _____ __ __   ___   ____
 / ___/  /  ] /    || |      /  _]    |  |__|  | /   \ |    \ |  |/ ]/ ___/|  |  | /   \ |    \
(   \_  /  / |  o  || |     /  [_     |  |  |  ||     ||  D  )|  ' /(   \_ |  |  ||     ||  o  )
 \__  |/  /  |     || |___ |    _]    |  |  |  ||  O  ||    / |    \ \__  ||  _  ||  O  ||   _/
 /  \ /   \_ |  _  ||     ||   [_     |  `  '  ||     ||    \ |     \/  \ ||  |  ||     ||  |
 \    \     ||  |  ||     ||     |     \      / |     ||  .  \|  .  |\    ||  |  ||     ||  |
  \___|\____||__|__||_____||_____|      \_/\_/   \___/ |__|\_||__|\_| \___||__|__| \___/ |__|

                                                                                             -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Scale Workshop</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Open Graph -->
    <meta property="og:title" content="Scale Workshop" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://sevish.com/scaleworkshop/" />
    <meta property="og:image" content="http://sevish.com/scaleworkshop/assets/img/scale-workshop-og-image.png" />
    <meta property="og:description" content="Scale Workshop is a tool that allows you to create microtonal tunings within your web browser. You can export these tunings to your device and use them to tune various synthesizers." />
    <meta property="og:site_name" content="Sevish Music" />

    <!-- Styles -->
    <link rel="stylesheet" href="inc/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="inc/jquery-ui-1.12.1/jquery-ui.min.css">
    <link rel="stylesheet" href="inc/socicon/style.css">
    <link rel="stylesheet" href="style.css">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/manifest.json">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#9bd03b">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    <nav class="navbar navbar-inverse bg-inverse">
      <div class="container-fluid">
        <div class="navbar-header" style="padding-left:10px;">
          <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="http://sevish.com/scaleworkshop" class="navbar-brand pull-right">Scale Workshop</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span> New <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#" id="generate_equal_temperament"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Equal temperament</a></li>
                <li><a href="#" id="generate_rank_2_temperament"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Rank-2 temperament</a></li>
                <li><a href="#" id="generate_harmonic_series_segment"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Harmonic series segment</a></li>
                <li><a href="#" id="generate_subharmonic_series_segment"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Subharmonic series segment</a></li>
                <li class="divider"></li>
                <li><a href="#" id="import-scala-scl"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span> Import .scl</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-adjust" aria-hidden="true"></span> Modify <span class="caret"></span></a>
              <ul class="dropdown-menu" id="modify-buttons">
                <!--<li><a href="#" id="modify_key_transpose"><span class="glyphicon glyphicon-compressed" aria-hidden="true"></span> Key transpose</a></li>-->
                <li><a href="#" id="modify_mode"><span class="glyphicon glyphicon-compressed" aria-hidden="true"></span> Mode</a></li>
                <!--<li><a href="#" id="modify_extend">Extend/repeat</a></li>-->
                <li><a href="#" id="modify_stretch"><span class="glyphicon glyphicon-compressed" aria-hidden="true"></span> Stretch/compress</a></li>
                <li><a href="#" id="modify_random_variance"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Random variance</a></li>
                <!--<li><a href="#" id="modify_quantize_to_bpm">Quantize to BPM</a></li>-->
                <!--<li><a href="#" id="modify_quantize_to_bpm">Octave reduce</a></li>-->
              </ul>
            </li>
            <!--<li><a href="#" id="nav_play"><span class="glyphicon glyphicon-music" aria-hidden="true"></span> Play</a></li>-->
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> Export <span class="caret"></span></a>
              <ul class="dropdown-menu" id="export-buttons">
                <li><a href="#">Generate some tuning data first</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> About <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="https://github.com/SeanArchibald/scale-workshop" target="_blank"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> GitHub</a></li>
                <li><a href="https://github.com/SeanArchibald/scale-workshop/issues" target="_blank"><span class="glyphicon glyphicon-send" aria-hidden="true"></span> Report Issue</a></li>
                <li><a href="http://sevish.com" target="_blank"><span class="glyphicon glyphicon-heart-empty" aria-hidden="true"></span> Made by Sevish</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container-fluid">

      <div class="row">
        <div class="col-sm-6 col-md-4 col-lg-4 col-main">
          <form>
            <label>Tuning name/description</label>
            <div class="form-group">
              <input id="txt_name" name="base_frequency" type="text" class="form-control"></input>
            </div>

            <label>Tuning data</label>
            <div class="form-group">
              <textarea id="txt_tuning_data" class="form-control" rows="12" title="Enter one interval per line. Values with a . will be calculated as cents. Values with a backslash (n\m) are n degrees of m-EDO. Values with forward slash (/) are calculated as ratios."></textarea>
            </div>

            <hr/>

            <div class="form-group">
              <label>Base frequency (note 1/1)</label>
              <div class="input-group">
                <input id="txt_base_frequency" name="base_frequency" type="number" min="0.0001" max="999999" class="form-control" value="440" title="Set the frequency (in Hz) of note 1/1"></input>
                <div class="input-group-addon">Hz</div>
              </div>
              <input name="Auto" id="btn_frequency_auto" type="button" value="Auto" class="btn btn-default pull-right" title="Automatically set base frequency from the MIDI note, assuming 12-EDO A440Hz"></input>
            </div>

            <div class="form-group">
              <label>Base MIDI note (note 1/1)</label>
              <div class="input-group" title="Set the MIDI note number to be note 1/1. By default this is 69 (A above middle C).">
                <input id="txt_base_midi_note" name="base_midi_note" type="number" min="0" max="127" step="1" class="form-control" value="69"></input>
                <div id="base_midi_note_name" class="input-group-addon" style="min-width:5em;">A5</div>
              </div>
            </div>

            <div class="form-group">
              <input name="Parse" id="btn_parse" type="button" value="Calculate" class="btn btn-primary"></input>
              <input name="Clear" id="btn_clear" type="button" value="Clear all" class="btn btn-danger pull-right"></input>
            </div>
          </form>
        </div>

        <div class="col-sm-6 col-md-8 col-lg-8 col-main">
          <div class="row">

            <!-- Settings column -->
            <div class="col-sm-12 col-md-6 col-md-push-6 col-lg-6 col-sub">

              <noscript>
                <p class="bg-danger lead" style="padding:1em;">JavaScript is disabled in your browser. Please enable JavaScript in order to use this software.</p>
              </noscript>

              <a id="btn_panic" href="#" class="btn btn-link" style="float:right;margin-top:1em;">Quiet</a>

              <div id="qwerty-indicator">
              </div>

              <div id="settings-accordion">

                <!-- general settings -->
                <div id="settings_general" class="group">
                  <h3>General settings</h3>
                  <div>
                    <form>
                      <div class="form-group">
                        <label>Line endings format</label>
                        <select id="input_select_newlines" class="form-control" title="If your exported tuning files didn't work right on macOS synths, try changing this option to Unix. Note: after changing this option you must click the 'Calculate' button to update exported tuning files correctly.">>
                          <option value="windows">Microsoft (Windows/MS-DOS)</option>
                          <option value="unix">Unix (Mac/Linux)</option>
                        </select>
                      </div>
                    </form>
                  </div>
                </div>

                <!-- synth settings -->
                <div id="settings_synth" class="group">
                  <h3>Synth settings</h3>
                  <div>
                    <form>
                      <div class="form-group">
                        <label for="input_range_main_vol">Main Volume</label>
                        <input type="range" class="form-control-range" id="input_range_main_vol" min="0" max="1" step="0.005" value="0.8">
                      </div>
                      <div class="form-group">
                        <label>Waveform</label>
                        <select id="input_select_synth_waveform" class="form-control">
                          <option value="triangle">Triangle</option>
                          <option value="sawtooth">Sawtooth</option>
                          <option value="square">Square</option>
                          <option value="sine">Sine</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>Amplitude Envelope</label>
                        <select id="input_select_synth_amp_env" class="form-control">
                          <option value="organ">Organ</option>
                          <option value="pad">Pad</option>
                          <option value="perc-short">Percussive (Short)</option>
                          <option value="perc-medium">Percussive (Medium)</option>
                          <option value="perc-long">Percussive (Long)</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>Delay effect</label>
                        <div class="checkbox">
                          <label>
                            <input id="input_checkbox_delay_on" type="checkbox"></input> On
                          </label>
                        </div>
                      </div>
                      <div class="form-group">
                        <label for="input_range_feedback_gain">Feedback gain</label>
                        <input type="range" class="form-control-range" id="input_range_feedback_gain" min="0" max="0.99" step="0.005" value="0.3">
                      </div>
                      <div class="form-group">
                        <label for="input_range_delay_time">Delay Time (ms)</label>
                        <input type="range" class="form-control-range" id="input_range_delay_time" min="10" max="5000" value="400">
                      </div>
                    </form>
                  </div>
                </div>

                <!-- note input settings -->
                <div id="settings_note_input" class="group">
                  <h3>Note input settings</h3>
                  <div>
                    <form>
                      <!--
                      <div class="form-group" id="midi-group">
                        <label>MIDI input device</label>
                        <select id="input_select_midi_device" class="form-control">
                          <option>???</option>
                        </select>
                      </div>
                      -->
                      <div class="form-group">
                        <label>Keyboard layout</label>
                        <select id="input_select_keyboard_layout" class="form-control" title="Select an alternative keyboard layout.">
                          <option value="EN">English (QWERTY)</option>
                          <option value="HU">Hungarian (QWERTZ)</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>QWERTY keys mapping</label>
                        <p>Distance (in scale degrees) between adjacent keys on the horizontal/vertical axes.</p>
                        <div class="input-group">
                          <div class="input-group-addon">V</div>
                          <input id="input_number_isomorphicmapping_vert" type="number" class="form-control" value="5" min="-100" max="100" />
                          <div class="input-group-addon">default 5</div>
                        </div>
                        <div class="input-group">
                          <div class="input-group-addon">H</div>
                          <input id="input_number_isomorphicmapping_horiz" type="number" class="form-control" value="1" min="-100" max="100" />
                          <div class="input-group-addon">default 1</div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!-- tuning table column -->
            <div id="col-tuning-table" class="col-sm-12 col-md-6 col-md-pull-6 col-lg-6 col-sub">
              <table id="tuning-table" class="table table-condensed table-hover">
              </table>
            </div>

          </div><!-- /.row -->
        </div><!-- /col -->
      </div><!-- /.row -->
    </div><!-- /.container-fluid -->

    <!-- Hidden by default -->
    <input type="file" id="scala-file" accept=".scl" style="display:none;" onchange="parse_imported_scala_scl(event)" />



    <!-- Generator Modals -->
    <div id="modal_generate_equal_temperament" class="modal" title="Generate equal temperament">
      <form>
        <label>Number of divisions</label>
        <div class="form-group">
          <input id="input_number_of_divisions" name="" type="number" min="0.0001" max="999999" class="form-control" value="5"></input>
        </div>

        <label>Interval to divide</label>
        <div class="form-group">
          <input id="input_interval_to_divide" name="" type="text" class="form-control" value="2/1"></input>
        </div>
      </form>
    </div>

    <div id="modal_generate_rank_2_temperament" class="modal" title="Generate rank-2 temperament">
      <form>
        <label>Generator</label>
        <div class="form-group">
          <input id="input_rank-2_generator" name="" type="text" class="form-control" value="3/2"></input>
        </div>

        <label>Period</label>
        <div class="form-group">
          <input id="input_rank-2_period" name="" type="text" class="form-control" value="2/1"></input>
        </div>

        <label>Scale size</label>
        <div class="form-group">
          <input id="input_rank-2_size" name="" type="number" min="2" max="99999" step="1" class="form-control" value="7"></input>
        </div>
      </form>
      <hr/>
      <button class="btn btn-default" onclick="show_mos( jQuery('#input_rank-2_period').val(), jQuery('#input_rank-2_generator').val(), jQuery('#input_rank-2_size').val(), jQuery('#input_rank-2_mos_threshold').val() );" style="float:left;">Show MOS</button>
      <p style="text-align:right;">(ignore MOS with steps smaller than <input id="input_rank-2_mos_threshold" name="" type="number" min="0.1" max="600" value="2.5" style="width:4em;"></input> cents)</p>
      <span id="info_rank_2_mos" style="display:block;margin-top:10px;"></span>
    </div>

    <div id="modal_generate_harmonic_series_segment" class="modal" title="Generate harmonic series segment">
      <form>
        <label>Lowest harmonic</label>
        <div class="form-group">
          <input id="input_lowest_harmonic" name="" type="number" min="1" max="999999" step="1" class="form-control" value="8"></input>
        </div>

        <label>Highest harmonic</label>
        <div class="form-group">
          <input id="input_highest_harmonic" name="" type="number" min="1" max="999999" step="1" class="form-control" value="16"></input>
        </div>
      </form>
    </div>

    <div id="modal_generate_subharmonic_series_segment" class="modal" title="Generate subharmonic series segment">
      <form>
        <label>Lowest subharmonic</label>
        <div class="form-group">
          <input id="input_lowest_subharmonic" name="" type="number" min="1" max="999999" step="1" class="form-control" value="8"></input>
        </div>

        <label>Highest subharmonic</label>
        <div class="form-group">
          <input id="input_highest_subharmonic" name="" type="number" min="1" max="999999" step="1" class="form-control" value="16"></input>
        </div>
      </form>
    </div>

    <!-- Modify Modals -->
    <div id="modal_modify_stretch" class="modal" title="Stretch/compress tuning">
      <p>This applies a stretching or compression evenly across the whole scale.<br/>Entering 1 will cause no change; entering 2 will make every interval twice as large.</p>
      <form>
        <label>Stretch ratio</label>
        <div class="form-group">
          <input id="input_stretch_ratio" name="" type="number" class="form-control" value="1.005" min="0.0001" max="99999"></input>
        </div>
      </form>
    </div>

    <div id="modal_modify_random_variance" class="modal" title="Random variance">
      <p>This will add a random amount of detuning to each note of the scale.</p>
      <form>
        <label>Maximum variance in cents</label>
        <div class="form-group">
          <input id="input_cents_max_variance" name="" type="number" class="form-control" value="10" min="0.0001" max="99999"></input>
        </div>

        <p>By default, the "octave" won't be detuned. This prevents the scale sound progressively more out-of-tune as you go up/down by octaves. Check the box below to over-ride this.</p>

        <div class="checkbox">
          <label>
            <input id="input_checkbox_vary_period" type="checkbox"></input> Vary the octave
          </label>
        </div>
      </form>
    </div>

    <div id="modal_modify_mode" class="modal" title="Mode">
      <p>Create a subset of a scale.</p>
      <form>
        <label>Mode</label>
        <div class="form-group">
          <input id="input_modify_mode" name="" type="text" class="form-control" value="" placeholder="2 2 1 2 2 2 1"></input>
        </div>
      </form>
    </div>

    <!--<div id="modal_modify_key_transpose" class="modal" title="Key transpose">
      <p>Set 1/1 to another note of your scale.</p>
      <form>
        <label>Key for 1/1</label>
        <div class="form-group">
          <input id="input_modify_key_transpose" name="" type="number" class="form-control" min="0" max="99999" step="1"></input>
        </div>
      </form>
    </div>-->



    <!-- Export Modals -->
    <div id="modal_share_url" class="modal" title="Share scale as URL">
      <p>Share your scale using the sharing link.</p>
      <form>
        <div class="form-group">
          <input id="input_share_url" name="" type="text" class="form-control" value="" readonly></input>
        </div>
      </form>
      <p class="social-icons">
        <a class="social-icons-email" href="#"><span class="socicon-mail"></span></a>
        <a class="social-icons-twitter" href="#"><span class="socicon-twitter"></span></a>
      </p>
    </div>



    <!-- Load scripts at end of document for faster page loading -->
    <script src="inc/jquery-3.2.1.min.js"></script>
    <script src="inc/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="inc/jquery-ui-1.12.1/external/jquery/jquery.js"></script>
    <script src="inc/jquery-ui-1.12.1/jquery-ui.min.js"></script>
    <script src="inc/eventemitter3.js"></script>
    <script src="js/scaleworkshop.js"></script>
    <script src="js/helpers.js"></script>
    <script src="js/generators.js"></script>
    <script src="js/modifiers.js"></script>
    <script src="js/exporters.js"></script>
    <script src="js/keymap.js"></script>
    <script src="js/synth.js"></script>
    <script src="js/midi.js"></script>
    <script src="js/events.js"></script>
  </body>
</html>
